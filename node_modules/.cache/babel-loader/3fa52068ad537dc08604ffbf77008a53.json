{"ast":null,"code":"export class ApiService {\n  constructor(axios) {\n    this._axios = axios;\n\n    this._axios.interceptors.request.use(async cfg => {\n      const token = sessionStorage.getItem(\"token\");\n\n      if (token) {\n        cfg.headers[\"Authorization\"] = \"Bearer \" + token;\n      }\n\n      return { ...cfg,\n        withCredentials: true,\n        headers: {\n          \"Accept\": \"*/*\",\n          //   \"X-Accept-Cookie\": true,\n          ...cfg.headers\n        }\n      };\n    });\n  }\n\n  async getToken(username, password) {\n    const resp = await this._axios.post(\"/api/login/getToken\", {\n      username: username,\n      password: password\n    }, {\n      validateStatus: status => status === 200 || status === 400\n    });\n    sessionStorage.setItem(\"token\", resp.data);\n  }\n\n  async getPrize(hccid) {\n    const resp = await this._axios.get(`/api/prize/getPrize/${hccid}`, {\n      validateStatus: status => status === 200 || status === 400\n    });\n    return resp.data;\n  }\n\n  async postUser(hccid, fullname) {\n    const resp = await this._axios.post(`/api/users/register/`, {\n      \"hccId\": parseInt(hccid),\n      \"fullname\": fullname\n    }, {\n      validateStatus: status => status === 200 || status === 400\n    });\n    return resp.data;\n  }\n\n  async getRankList(hccid, fullname) {\n    const resp = await this._axios.post(`/api/users/register/`, {\n      \"hccId\": parseInt(hccid),\n      \"fullname\": fullname\n    }, {\n      validateStatus: status => status === 200 || status === 400\n    });\n    return resp.data;\n  }\n\n}","map":{"version":3,"sources":["D:/react/src/services/api/apiService.js"],"names":["ApiService","constructor","axios","_axios","interceptors","request","use","cfg","token","sessionStorage","getItem","headers","withCredentials","getToken","username","password","resp","post","validateStatus","status","setItem","data","getPrize","hccid","get","postUser","fullname","parseInt","getRankList"],"mappings":"AAAA,OAAO,MAAMA,UAAN,CAAiB;AACtBC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,SAAKC,MAAL,GAAcD,KAAd;;AACA,SAAKC,MAAL,CAAYC,YAAZ,CAAyBC,OAAzB,CAAiCC,GAAjC,CAAqC,MAAOC,GAAP,IAAe;AAClD,YAAMC,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAd;;AACA,UAAIF,KAAJ,EAAW;AACTD,QAAAA,GAAG,CAACI,OAAJ,CAAY,eAAZ,IAA+B,YAAYH,KAA3C;AACD;;AACD,aAAO,EACL,GAAGD,GADE;AAELK,QAAAA,eAAe,EAAE,IAFZ;AAGLD,QAAAA,OAAO,EAAE;AACL,oBAAS,KADJ;AAET;AACE,aAAGJ,GAAG,CAACI;AAHA;AAHJ,OAAP;AASD,KAdD;AAeD;;AAEa,QAARE,QAAQ,CAACC,QAAD,EAAWC,QAAX,EAAqB;AACjC,UAAMC,IAAI,GAAG,MAAM,KAAKb,MAAL,CAAYc,IAAZ,CACjB,qBADiB,EAEjB;AACEH,MAAAA,QAAQ,EAAEA,QADZ;AAEEC,MAAAA,QAAQ,EAAEA;AAFZ,KAFiB,EAMjB;AACEG,MAAAA,cAAc,EAAGC,MAAD,IAAYA,MAAM,KAAK,GAAX,IAAkBA,MAAM,KAAK;AAD3D,KANiB,CAAnB;AAUAV,IAAAA,cAAc,CAACW,OAAf,CAAuB,OAAvB,EAAgCJ,IAAI,CAACK,IAArC;AACD;;AACa,QAARC,QAAQ,CAACC,KAAD,EAAQ;AACpB,UAAMP,IAAI,GAAG,MAAM,KAAKb,MAAL,CAAYqB,GAAZ,CAChB,uBAAsBD,KAAM,EADZ,EAEhB;AACCL,MAAAA,cAAc,EAAGC,MAAD,IAAYA,MAAM,KAAK,GAAX,IAAkBA,MAAM,KAAK;AAD1D,KAFgB,CAAnB;AAMA,WAAOH,IAAI,CAACK,IAAZ;AACD;;AACa,QAARI,QAAQ,CAACF,KAAD,EAAOG,QAAP,EAAiB;AAC7B,UAAMV,IAAI,GAAG,MAAM,KAAKb,MAAL,CAAYc,IAAZ,CAChB,sBADgB,EAEjB;AACE,eAAQU,QAAQ,CAACJ,KAAD,CADlB;AAEE,kBAAWG;AAFb,KAFiB,EAOhB;AACCR,MAAAA,cAAc,EAAGC,MAAD,IAAYA,MAAM,KAAK,GAAX,IAAkBA,MAAM,KAAK;AAD1D,KAPgB,CAAnB;AAWA,WAAOH,IAAI,CAACK,IAAZ;AACD;;AACgB,QAAXO,WAAW,CAACL,KAAD,EAAOG,QAAP,EAAiB;AAChC,UAAMV,IAAI,GAAG,MAAM,KAAKb,MAAL,CAAYc,IAAZ,CAChB,sBADgB,EAEjB;AACE,eAAQU,QAAQ,CAACJ,KAAD,CADlB;AAEE,kBAAWG;AAFb,KAFiB,EAOhB;AACCR,MAAAA,cAAc,EAAGC,MAAD,IAAYA,MAAM,KAAK,GAAX,IAAkBA,MAAM,KAAK;AAD1D,KAPgB,CAAnB;AAWA,WAAOH,IAAI,CAACK,IAAZ;AACD;;AArEqB","sourcesContent":["export class ApiService {\r\n  constructor(axios) {\r\n    this._axios = axios;\r\n    this._axios.interceptors.request.use(async (cfg) => {\r\n      const token = sessionStorage.getItem(\"token\");\r\n      if (token) {\r\n        cfg.headers[\"Authorization\"] = \"Bearer \" + token;\r\n      }\r\n      return {\r\n        ...cfg,\r\n        withCredentials: true,\r\n        headers: {\r\n            \"Accept\":\"*/*\",\r\n        //   \"X-Accept-Cookie\": true,\r\n          ...cfg.headers,\r\n        },\r\n      };\r\n    });\r\n  }\r\n\r\n  async getToken(username, password) {\r\n    const resp = await this._axios.post(\r\n      \"/api/login/getToken\",\r\n      {\r\n        username: username,\r\n        password: password,\r\n      },\r\n      {\r\n        validateStatus: (status) => status === 200 || status === 400,\r\n      }\r\n    );    \r\n    sessionStorage.setItem(\"token\", resp.data)\r\n  }\r\n  async getPrize(hccid) {\r\n    const resp = await this._axios.get(\r\n      `/api/prize/getPrize/${hccid}`,\r\n       {\r\n        validateStatus: (status) => status === 200 || status === 400,\r\n      }\r\n    );    \r\n    return resp.data\r\n  }\r\n  async postUser(hccid,fullname) {\r\n    const resp = await this._axios.post(\r\n      `/api/users/register/`,\r\n      {\r\n        \"hccId\":parseInt(hccid),\r\n        \"fullname\":fullname    \r\n      }\r\n      ,\r\n       {\r\n        validateStatus: (status) => status === 200 || status === 400,\r\n      }\r\n    );    \r\n    return resp.data\r\n  }\r\n  async getRankList(hccid,fullname) {\r\n    const resp = await this._axios.post(\r\n      `/api/users/register/`,\r\n      {\r\n        \"hccId\":parseInt(hccid),\r\n        \"fullname\":fullname    \r\n      }\r\n      ,\r\n       {\r\n        validateStatus: (status) => status === 200 || status === 400,\r\n      }\r\n    );    \r\n    return resp.data\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}